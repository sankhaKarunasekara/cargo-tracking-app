import{j as Y,n as ie,s as D,v as Z,o as i,l as L,w as P,a as e,t as l,x as B,d as p,c as d,q as y,b as q,_ as ae,p as h,m as de,F as N,r as z,y as O,z as U,A as ue}from"./Dr7MGKIK.js";import{C as ce,B as W,a as M,u as me,S as ge,A as pe}from"./Bk-JGKBt.js";import"./BGBAie8I.js";const ve={class:"lg:hidden"},xe={class:"p-6 pb-4"},we={class:"flex items-start justify-between gap-4"},fe={class:"flex items-start min-w-0"},be={class:"min-w-0"},he={class:"text-base font-semibold text-gray-900 truncate"},ye={class:"flex items-center mt-1 text-xs text-gray-500"},ke={class:"px-1.5 py-0.5 bg-gray-100 text-gray-800 rounded font-medium"},Ce={class:"flex flex-col items-end flex-shrink-0"},De={class:"p-6 pt-4"},_e={class:"flex flex-wrap items-center gap-2 mb-4"},$e={class:"inline-flex items-center px-2.5 py-1 bg-blue-50 text-blue-700 rounded-md text-xs font-medium whitespace-nowrap"},Ne={key:0},Me={class:"inline-flex items-center px-2.5 py-1 bg-purple-50 text-purple-700 rounded-md text-xs font-medium whitespace-nowrap"},je={class:"space-y-2 text-sm"},Le={class:"flex"},Be={class:"font-medium text-gray-700 truncate"},Te={class:"flex"},Ie={class:"font-medium text-gray-700 truncate"},Se={class:"flex flex-wrap items-center gap-2 mt-4"},ze={class:"inline-flex items-center px-2.5 py-1 bg-indigo-50 text-indigo-700 rounded-md text-xs font-medium whitespace-nowrap"},Ve={class:"flex items-center justify-end px-6 py-4 bg-gray-50"},Fe={class:"flex space-x-2"},Ae={class:"hidden lg:flex"},Ee={class:"flex-grow min-w-0 p-6"},Pe={class:"flex items-start gap-4"},Re={class:"flex items-start min-w-0"},He={class:"min-w-0"},Oe={class:"text-base font-semibold text-gray-900 truncate"},Ue={class:"flex items-center mt-1 text-xs text-gray-500"},We={class:"px-1.5 py-0.5 bg-gray-100 text-gray-800 rounded font-medium"},Ze={class:"mt-4"},qe={class:"flex flex-wrap items-center gap-2 mb-4"},Ge={class:"inline-flex items-center px-2.5 py-1 bg-blue-50 text-blue-700 rounded-md text-xs font-medium whitespace-nowrap"},Qe={key:0},Je={class:"inline-flex items-center px-2.5 py-1 bg-purple-50 text-purple-700 rounded-md text-xs font-medium whitespace-nowrap"},Ke={class:"space-y-2 text-sm"},Xe={class:"flex min-w-0"},Ye={class:"font-medium text-gray-700 truncate"},et={class:"flex min-w-0"},tt={class:"font-medium text-gray-700 truncate"},st={class:"flex flex-wrap items-center gap-2 mt-4"},ot={class:"inline-flex items-center px-2.5 py-1 bg-indigo-50 text-indigo-700 rounded-md text-xs font-medium whitespace-nowrap"},nt={class:"flex flex-col justify-center flex-shrink-0 w-56 p-6 border-l border-gray-100 bg-gray-50"},lt={class:"flex flex-col gap-3"},rt=Y({__name:"CusDecCard",props:{cusdec:{}},emits:["view-details","view-timeline","acknowledge"],setup(u,{emit:k}){const a=u,w=ie(),_=k,T=()=>{_("view-details",a.cusdec),w.push(`/cusdec/${a.cusdec.id}`)},n=()=>{_("view-timeline",a.cusdec)},g=()=>{_("acknowledge",a.cusdec)},x=D(()=>a.cusdec.officeCode||"CBHQ1"),I=D(()=>{var c;return((c=a.cusdec.channel)==null?void 0:c.toLowerCase())||"green"}),f=D(()=>a.cusdec.regDate?new Date(a.cusdec.regDate).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"/"):"05/04/2024"),b=D(()=>a.cusdec.containerCount||0),V=D(()=>a.cusdec.countryOfExport||"Singapore"),S=D(()=>a.cusdec.destination||"Sri Lanka"),F=D(()=>{switch(I.value){case"red":return{bg:"bg-red-100",text:"text-red-700",border:"border-red-200"};case"yellow":return{bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200"};case"green":return{bg:"bg-green-100",text:"text-green-700",border:"border-green-200"};case"blue":return{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200"};default:return{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-200"}}}),A=()=>{switch(a.cusdec.status.toLowerCase()){case"processing":return"status-bg-review";case"released":case"exempted":return"status-bg-paid";case"waiting confirmation":return"status-bg-pending";case"on hold":return"status-bg-review";case"detained":case"rejected":return"status-bg-error";default:return"bg-gray-100 text-gray-800"}};return D(()=>{const c=a.cusdec.status.toLowerCase();return c==="processing"||c==="on hold"?"Processing":c==="rejected"?"Detained":c==="released"||c==="exempted"?"Exited":c==="waiting confirmation"?"Waiting Confirmation":a.cusdec.status}),["Processing","On Hold","Waiting Confirmation"].includes(a.cusdec.status),["Released","Exempted"].includes(a.cusdec.status),a.cusdec.status,(c,o)=>(i(),Z(L(ce),{class:"mb-5 overflow-hidden transition-all duration-200 border border-gray-100 rounded-lg shadow-sm hover:shadow-md"},{default:P(()=>[e("div",ve,[e("div",xe,[e("div",we,[e("div",fe,[o[1]||(o[1]=e("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 mr-4 rounded-md bg-blue-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})])],-1)),e("div",be,[e("h3",he,l(c.cusdec.cusdecNumber),1),e("div",ye,[e("span",ke,l(x.value),1),o[0]||(o[0]=e("span",{class:"mx-1.5"},"â€¢",-1)),e("span",null,l(f.value),1)])])]),e("div",Ce,[e("div",{class:B(["px-3 py-1 text-xs font-medium rounded-full",A()])},l(c.cusdec.status),3)])])]),o[11]||(o[11]=e("div",{class:"h-px bg-gray-100"},null,-1)),e("div",De,[e("div",_e,[e("div",$e,[o[2]||(o[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",class:"mr-1"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M13 4a1 1 0 0 1 1 1h4a1 1 0 0 1 .783 .378l.074 .108l3 5l.055 .103l.04 .107l.029 .109l.016 .11l.003 .085v6a1 1 0 0 1 -1 1h-1.171a3.001 3.001 0 0 1 -5.658 0h-4.342a3.001 3.001 0 0 1 -5.658 0h-1.171a1 1 0 0 1 -1 -1v-11a2 2 0 0 1 2 -2zm-6 12a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m10 0a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m.434 -9h-3.434v3h5.234z"})],-1)),p(" "+l(b.value)+" Container",1),b.value!==1?(i(),d("span",Ne,"s")):y("",!0)]),e("div",Me,[o[3]||(o[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[e("path",{d:"M12 12c2-2.96 0-7-1-8c0 3.038-1.773 4.741-3 6c-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5c-1.786 3-2 4-4 2z"})],-1)),p(" "+l(V.value),1)])]),e("div",je,[e("div",Le,[o[4]||(o[4]=e("span",{class:"flex-shrink-0 w-20 text-gray-500"},"Consignee:",-1)),e("span",Be,l(c.cusdec.consigneeName),1)]),e("div",Te,[o[5]||(o[5]=e("span",{class:"flex-shrink-0 w-20 text-gray-500"},"Declarant:",-1)),e("span",Ie,l(c.cusdec.declarantName),1)])]),e("div",Se,[e("div",ze,[o[6]||(o[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1)),p(" "+l(S.value),1)]),c.cusdec.status.toLowerCase()!=="waiting confirmation"?(i(),d("div",{key:0,class:B(["inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium whitespace-nowrap",F.value.bg,F.value.text])},[o[7]||(o[7]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3.5 h-3.5 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3"}),e("path",{d:"M3 13h3a2 2 0 0 1 2 2v3"}),e("path",{d:"M16 13h3a2 2 0 0 1 2 2v3"})],-1)),p(" Channel "+l(I.value.toUpperCase()),1)],2)):y("",!0)])]),e("div",Ve,[e("div",Fe,[c.cusdec.status.toLowerCase()==="waiting confirmation"?(i(),Z(L(W),{key:0,variant:"primary",class:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:g},{default:P(()=>o[8]||(o[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[e("path",{d:"M20 6L9 17l-5-5"})],-1),p(" Acknowledge ")])),_:1})):y("",!0),c.cusdec.status.toLowerCase()!=="waiting confirmation"?(i(),d("button",{key:1,onClick:n,class:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium transition-colors rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},o[9]||(o[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[e("path",{d:"M12 8v4l3 3"}),e("circle",{cx:"12",cy:"12",r:"10"})],-1),p(" Track ")]))):y("",!0),q(L(W),{variant:"custom",class:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:T},{default:P(()=>o[10]||(o[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[e("path",{d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7Z"})],-1),p(" View ")])),_:1})])])]),e("div",Ae,[e("div",Ee,[e("div",Pe,[e("div",Re,[o[13]||(o[13]=e("div",{class:"flex items-center justify-center flex-shrink-0 w-10 h-10 mr-4 rounded-md bg-blue-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})])],-1)),e("div",He,[e("h3",Oe,l(c.cusdec.cusdecNumber),1),e("div",Ue,[e("span",We,l(x.value),1),o[12]||(o[12]=e("span",{class:"mx-1.5"},"â€¢",-1)),e("span",null,l(f.value),1)])])]),e("div",{class:B(["px-3 py-1 text-xs font-medium rounded-full flex-shrink-0 whitespace-nowrap",A()])},l(c.cusdec.status),3)]),e("div",Ze,[e("div",qe,[e("div",Ge,[o[14]||(o[14]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",class:"mr-1"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M13 4a1 1 0 0 1 1 1h4a1 1 0 0 1 .783 .378l.074 .108l3 5l.055 .103l.04 .107l.029 .109l.016 .11l.003 .085v6a1 1 0 0 1 -1 1h-1.171a3.001 3.001 0 0 1 -5.658 0h-4.342a3.001 3.001 0 0 1 -5.658 0h-1.171a1 1 0 0 1 -1 -1v-11a2 2 0 0 1 2 -2zm-6 12a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m10 0a1 1 0 1 0 0 2a1 1 0 0 0 0 -2m.434 -9h-3.434v3h5.234z"})],-1)),p(" "+l(b.value)+" Container",1),b.value!==1?(i(),d("span",Qe,"s")):y("",!0)]),e("div",Je,[o[15]||(o[15]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[e("path",{d:"M12 12c2-2.96 0-7-1-8c0 3.038-1.773 4.741-3 6c-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5c-1.786 3-2 4-4 2z"})],-1)),p(" "+l(V.value),1)])]),e("div",Ke,[e("div",Xe,[o[16]||(o[16]=e("span",{class:"flex-shrink-0 w-20 text-gray-500"},"Consignee:",-1)),e("span",Ye,l(c.cusdec.consigneeName),1)]),e("div",et,[o[17]||(o[17]=e("span",{class:"flex-shrink-0 w-20 text-gray-500"},"Declarant:",-1)),e("span",tt,l(c.cusdec.declarantName),1)])]),e("div",st,[e("div",ot,[o[18]||(o[18]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-1"},[e("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e("circle",{cx:"12",cy:"10",r:"3"})],-1)),p(" "+l(S.value),1)]),c.cusdec.status.toLowerCase()!=="waiting confirmation"?(i(),d("div",{key:0,class:B(["inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium whitespace-nowrap",F.value.bg,F.value.text])},[o[19]||(o[19]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3.5 h-3.5 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3"}),e("path",{d:"M3 13h3a2 2 0 0 1 2 2v3"}),e("path",{d:"M16 13h3a2 2 0 0 1 2 2v3"})],-1)),p(" Channel "+l(I.value.toUpperCase()),1)],2)):y("",!0)])])]),e("div",nt,[e("div",lt,[c.cusdec.status.toLowerCase()==="waiting confirmation"?(i(),Z(L(W),{key:0,variant:"primary",class:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-white transition-colors bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700",onClick:g},{default:P(()=>o[20]||(o[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("path",{d:"M20 6L9 17l-5-5"})],-1),p(" Acknowledge ")])),_:1})):y("",!0),c.cusdec.status.toLowerCase()!=="waiting confirmation"?(i(),d("button",{key:1,onClick:n,class:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 transition-colors bg-white border border-gray-200 rounded-md shadow-sm hover:bg-gray-50"},o[21]||(o[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("path",{d:"M12 8v4l3 3"}),e("circle",{cx:"12",cy:"12",r:"10"})],-1),p(" Timeline ")]))):y("",!0),q(L(W),{variant:"custom",class:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-blue-700 transition-colors border border-transparent rounded-md shadow-sm bg-blue-50 hover:bg-blue-100",onClick:T},{default:P(()=>o[22]||(o[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("path",{d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7Z"})],-1),p(" Details ")])),_:1})])])])]),_:1}))}}),it=ae(rt,[["__scopeId","data-v-e303b21f"]]);function at(){return M}function dt(u){return console.log("Filtering with criteria:",u),Object.values(u).some(a=>a!=null&&a!=="")?M.filter(a=>{if(u.cusdecNumber&&u.cusdecNumber.trim()!==""&&!a.cusdecNumber.toLowerCase().includes(u.cusdecNumber.toLowerCase())||u.declarantTIN&&u.declarantTIN.trim()!==""&&!a.declarantTIN.toLowerCase().includes(u.declarantTIN.toLowerCase())||u.consigneeTIN&&u.consigneeTIN.trim()!==""&&!a.consigneeTIN.toLowerCase().includes(u.consigneeTIN.toLowerCase())||u.status&&u.status.trim()!==""&&a.status.toLowerCase()!==u.status.toLowerCase()||u.channel&&u.channel.trim()!==""&&a.channel.toLowerCase()!==u.channel.toLowerCase())return!1;if(u.startDate&&u.startDate.trim()!==""){const w=new Date(u.startDate),_=new Date(a.regDate);if(isNaN(w.getTime()))console.warn("Invalid start date:",u.startDate);else if(_<w)return!1}if(u.endDate&&u.endDate.trim()!==""){const w=new Date(u.endDate),_=new Date(a.regDate);if(isNaN(w.getTime()))console.warn("Invalid end date:",u.endDate);else if(_>w)return!1}return!0}):(console.log("No active filters - returning all data"),M)}function ut(){const u=M.length,k=M.reduce((n,g)=>n+g.containerCount,0),a=M.reduce((n,g)=>n+g.invoiceValue,0),w=M.reduce((n,g)=>{const x=g.status;return n[x]||(n[x]=0),n[x]++,n},{}),_=M.reduce((n,g)=>{const x=g.channel;return n[x]||(n[x]=0),n[x]++,n},{}),T=M.reduce((n,g)=>{const x=g.originCountry;return n[x]||(n[x]=0),n[x]++,n},{});return{totalRecords:u,totalContainers:k,totalInvoiceValue:a,statusDistribution:w,channelDistribution:_,countryDistribution:T}}const ct={class:"min-h-screen pb-20 bg-gray-50"},mt={class:"container px-4 mx-auto sm:px-6 lg:px-8"},gt={class:"p-3 mt-6 mb-5 overflow-x-auto bg-white rounded-lg shadow-sm"},pt={class:"flex space-x-2"},vt=["onClick"],xt={class:"p-4 mb-5 bg-white rounded-lg shadow-sm md:hidden"},wt={key:0,class:"p-5 mb-5 bg-white rounded-lg shadow-sm md:hidden"},ft={class:"space-y-5"},bt={class:"mb-6"},ht={class:"space-y-4"},yt={class:"space-y-5"},kt=["for"],Ct=["id","value","onChange"],Dt={value:""},_t=["value"],$t=["id","placeholder","value","onInput"],Nt={class:"flex flex-col md:flex-row md:space-x-5"},Mt={class:"hidden md:block md:w-80 xl:w-80 lg:w-64 bg-white shadow-sm md:sticky md:top-16 md:self-start h-auto flex-shrink-0 mb-5 rounded-lg transition-all duration-200"},jt={class:"p-5 lg:p-4"},Lt={class:"mb-6"},Bt={class:"space-y-4"},Tt={class:"space-y-5"},It=["for"],St=["id","value","onChange"],zt={value:""},Vt=["value"],Ft=["id","placeholder","value","onInput"],At={class:"flex-1"},Et={class:"mt-0"},Pt={key:0,class:"py-10 text-center text-gray-500 bg-white rounded-lg shadow-sm"},Rt={key:1},Ht={class:"flex flex-col mb-5 md:flex-row md:items-center md:justify-between"},Ot={class:"text-sm text-gray-500 mb-2 md:mb-0"},Ut={class:"w-full space-y-5"},Wt={key:0,class:"flex justify-center mt-8 mb-20"},Zt=["disabled"],qt={key:1,class:"flex justify-center mt-8"},Gt={class:"inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},Qt=["disabled"],Jt=["onClick"],Kt=["disabled"],Xt={key:2,class:"flex items-center justify-center mt-3"},Yt={class:"text-sm text-gray-500"},es={class:"font-medium"},ts={class:"font-medium"},ss={class:"font-medium"},os={key:0,class:"fixed inset-0 z-20 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm"},ns={class:"w-full max-w-2xl p-0 mx-4 overflow-hidden bg-white rounded-lg shadow-xl"},ls={class:"p-6 space-y-6"},rs={key:0,class:"grid grid-cols-1 gap-6 md:grid-cols-2"},is={class:"p-3 bg-gray-50 rounded-lg"},as={class:"font-medium"},ds={class:"p-3 bg-gray-50 rounded-lg"},us={class:"font-medium"},cs={class:"p-3 bg-gray-50 rounded-lg"},ms={class:"font-medium"},gs={class:"p-3 bg-gray-50 rounded-lg"},ps={class:"font-medium"},vs={class:"p-3 bg-gray-50 rounded-lg"},xs={class:"font-medium"},ws={class:"p-3 bg-gray-50 rounded-lg"},fs={class:"font-medium"},bs={class:"p-3 bg-gray-50 rounded-lg"},hs={class:"font-medium"},ys={class:"p-3 bg-gray-50 rounded-lg"},ks={class:"font-medium"},$=10,$s=Y({__name:"CusDecTracking",setup(u){const{isMobile:k}=me(),a=h([{id:"all",label:"All",active:!0},{id:"waiting confirmation",label:"Waiting Confirmation",active:!1},{id:"processing",label:"Processing",active:!1},{id:"detained",label:"Detained",active:!1},{id:"exited",label:"Exited",active:!1}]),w=h("all"),_=r=>{console.log("Setting active status to:",r),a.value=a.value.map(t=>({...t,active:t.id===r})),w.value=r,C.value=1,E.value=$},T=()=>{const t=new Date().toISOString().slice(0,10);return{startDate:new Date("2025-01-01").toISOString().slice(0,10),endDate:t}},n=h(T()),g=h([{id:"cusdecNumber",label:"CusDec Number",type:"text",placeholder:"Enter CusDec number",value:""},{id:"declarantTIN",label:"Declarant TIN Number",type:"text",placeholder:"Enter TIN number",value:""},{id:"consigneeTIN",label:"Consignee TIN Number",type:"text",placeholder:"Enter TIN number",value:""}]),x=h(at()),I=h(!1),f=h(null),b=h(!1);h(!1);const V=h(!1),S=h({id:"",type:"cusdec",status:""});de(()=>{const r=window.innerWidth>=768;b.value=r;const t=()=>{window.innerWidth>=768&&(b.value=!0)};return window.addEventListener("resize",t),console.log("Component mounted with data:",x.value.length,"records"),document.addEventListener("toggle-filters",A),()=>{window.removeEventListener("resize",t),document.removeEventListener("toggle-filters",A)}});const F=()=>{b.value=!b.value},A=()=>{k.value&&(b.value=!b.value)};ue("toggleFilters",A),ut();const c=r=>(r=r.toLowerCase(),r==="processing"||r==="on hold"?"processing":r==="rejected"?"detained":r==="released"||r==="exempted"?"exited":r),o=r=>{g.value=r},R=(r,t)=>{n.value.startDate=r,n.value.endDate=t},J=()=>{C.value=1,E.value=$,k.value&&(b.value=!1)},G=()=>{g.value=g.value.map(r=>({...r,value:""})),n.value=T(),C.value=1,E.value=$},j=D(()=>{var t,s,v;let r=dt({cusdecNumber:(t=g.value.find(m=>m.id==="cusdecNumber"))==null?void 0:t.value,declarantTIN:(s=g.value.find(m=>m.id==="declarantTIN"))==null?void 0:s.value,consigneeTIN:(v=g.value.find(m=>m.id==="consigneeTIN"))==null?void 0:v.value,startDate:n.value.startDate,endDate:n.value.endDate});return w.value!=="all"&&(r=r.filter(m=>c(m.status).toLowerCase()===w.value.toLowerCase())),w.value==="all"&&r.sort((m,X)=>m.status==="Processing"&&X.status!=="Processing"?-1:m.status!=="Processing"&&X.status==="Processing"?1:0),r}),C=h(1),K=D(()=>Math.ceil(j.value.length/$)),E=h($),ee=D(()=>{if(console.log("isMobile:",k.value),!k.value){const r=(C.value-1)*$,t=r+$;return j.value.slice(r,t)}return j.value.slice(0,E.value)}),H=h(!1),te=()=>{H.value=!0,setTimeout(()=>{E.value+=$,H.value=!1},500)},se=D(()=>E.value<j.value.length),Q=r=>{C.value=r},oe=r=>{f.value=r,I.value=!0},ne=()=>{I.value=!1},le=r=>{S.value={id:r.id,type:"cusdec",status:r.status},V.value=!0},re=r=>{switch(r.toLowerCase()){case"released":return"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800";case"processing":return"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800";case"on hold":return"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800";case"rejected":return"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800";case"exempted":return"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800";default:return"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800"}};return(r,t)=>(i(),d("div",ct,[e("div",mt,[e("div",gt,[e("div",pt,[(i(!0),d(N,null,z(a.value,s=>(i(),d("button",{key:s.id,onClick:v=>_(s.id),class:B(["px-4 py-2.5 text-sm font-medium rounded-md transition-colors whitespace-nowrap",s.active?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50"])},l(s.label),11,vt))),128))])]),e("div",xt,[e("button",{onClick:F,class:"flex w-full items-center justify-between text-sm font-medium text-gray-700 focus:outline-none"},[t[12]||(t[12]=e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})]),e("span",null,"Advanced Filters")],-1)),(i(),d("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:B(["ml-2 transition-transform",{"rotate-180":b.value}])},t[11]||(t[11]=[e("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))])]),b.value?(i(),d("div",wt,[e("div",ft,[e("div",bt,[t[15]||(t[15]=e("h3",{class:"mb-3 text-sm font-medium text-gray-700"},"Date Range",-1)),e("div",ht,[e("div",null,[t[13]||(t[13]=e("label",{for:"startDateMobile",class:"block mb-2 text-sm text-gray-500"},"From",-1)),O(e("input",{id:"startDateMobile",type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>n.value.startDate=s),class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",onChange:t[1]||(t[1]=s=>R(n.value.startDate,n.value.endDate))},null,544),[[U,n.value.startDate]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"endDateMobile",class:"block mb-2 text-sm text-gray-500"},"To",-1)),O(e("input",{id:"endDateMobile",type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.endDate=s),class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",onChange:t[3]||(t[3]=s=>R(n.value.startDate,n.value.endDate))},null,544),[[U,n.value.endDate]])])])]),e("div",yt,[(i(!0),d(N,null,z(g.value,s=>(i(),d("div",{key:s.id,class:"space-y-2"},[e("label",{for:s.id+"Mobile",class:"block text-sm font-medium text-gray-700"},l(s.label),9,kt),s.type==="select"?(i(),d("select",{key:0,id:s.id+"Mobile",class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",value:s.value,onChange:v=>o(g.value.map(m=>m.id===s.id?{...m,value:v.target.value}:m))},[e("option",Dt,"Select "+l(s.label),1),(i(!0),d(N,null,z(s.options,v=>(i(),d("option",{key:v.value,value:v.value},l(v.label),9,_t))),128))],40,Ct)):(i(),d("input",{key:1,id:s.id+"Mobile",type:"text",placeholder:s.placeholder||`Enter ${s.label}`,class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",value:s.value,onInput:v=>o(g.value.map(m=>m.id===s.id?{...m,value:v.target.value}:m))},null,40,$t))]))),128))]),e("div",{class:"flex flex-col mt-6 space-y-3"},[e("button",{onClick:J,class:"inline-flex items-center justify-center w-full px-4 py-2.5 text-sm font-medium text-white transition-colors bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},t[16]||(t[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),p(" Apply Filters ")])),e("button",{onClick:G,class:"inline-flex items-center justify-center w-full px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("path",{d:"M2 12C2 6.48 6.48 2 12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12"}),e("path",{d:"M8 12H16"})],-1),p(" Reset ")]))])])])):y("",!0),e("div",Nt,[e("div",Mt,[e("div",jt,[t[23]||(t[23]=e("h2",{class:"mb-5 text-lg font-medium"},"Advanced Filters",-1)),e("div",Lt,[t[20]||(t[20]=e("h3",{class:"mb-3 text-sm font-medium text-gray-700"},"Date Range",-1)),e("div",Bt,[e("div",null,[t[18]||(t[18]=e("label",{for:"startDate",class:"block mb-2 text-sm text-gray-500"},"From",-1)),O(e("input",{id:"startDate",type:"date","onUpdate:modelValue":t[4]||(t[4]=s=>n.value.startDate=s),class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",onChange:t[5]||(t[5]=s=>R(n.value.startDate,n.value.endDate))},null,544),[[U,n.value.startDate]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"endDate",class:"block mb-2 text-sm text-gray-500"},"To",-1)),O(e("input",{id:"endDate",type:"date","onUpdate:modelValue":t[6]||(t[6]=s=>n.value.endDate=s),class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",onChange:t[7]||(t[7]=s=>R(n.value.startDate,n.value.endDate))},null,544),[[U,n.value.endDate]])])])]),e("div",Tt,[(i(!0),d(N,null,z(g.value,s=>(i(),d("div",{key:s.id,class:"space-y-2"},[e("label",{for:s.id,class:"block text-sm font-medium text-gray-700"},l(s.label),9,It),s.type==="select"?(i(),d("select",{key:0,id:s.id,class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",value:s.value,onChange:v=>o(g.value.map(m=>m.id===s.id?{...m,value:v.target.value}:m))},[e("option",zt,"Select "+l(s.label),1),(i(!0),d(N,null,z(s.options,v=>(i(),d("option",{key:v.value,value:v.value},l(v.label),9,Vt))),128))],40,St)):(i(),d("input",{key:1,id:s.id,type:"text",placeholder:s.placeholder||`Enter ${s.label}`,class:"block w-full px-3 py-2.5 text-sm border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",value:s.value,onInput:v=>o(g.value.map(m=>m.id===s.id?{...m,value:v.target.value}:m))},null,40,Ft))]))),128))]),e("div",{class:"flex flex-col mt-8 space-y-3"},[e("button",{onClick:J,class:"inline-flex items-center justify-center w-full px-4 py-2.5 text-sm font-medium text-white transition-colors bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},t[21]||(t[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1),p(" Apply Filters ")])),e("button",{onClick:G,class:"inline-flex items-center justify-center w-full px-4 py-2.5 text-sm font-medium text-gray-700 transition-colors bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"},t[22]||(t[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mr-2"},[e("path",{d:"M2 12C2 6.48 6.48 2 12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12"}),e("path",{d:"M8 12H16"})],-1),p(" Reset ")]))])])]),e("div",At,[e("div",Et,[j.value.length===0?(i(),d("div",Pt,[t[24]||(t[24]=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"mx-auto mb-4 text-gray-400"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1)),t[25]||(t[25]=e("p",{class:"mb-4"},"No CusDec records found matching your filters",-1)),e("button",{onClick:G,class:"px-5 py-2.5 text-white transition-colors bg-blue-600 rounded-md hover:bg-blue-700"}," Reset Filters ")])):(i(),d("div",Rt,[e("div",Ht,[e("p",Ot,"Found "+l(j.value.length)+" CusDec records",1)]),e("div",Ut,[(i(!0),d(N,null,z(ee.value,s=>(i(),Z(it,{key:s.id,cusdec:s,onViewDetails:oe,onViewTimeline:le,class:"mb-5"},null,8,["cusdec"]))),128)),se.value&&L(k)?(i(),d("div",Wt,[e("button",{onClick:te,disabled:H.value,class:"inline-flex items-center justify-center px-5 py-2.5 text-sm font-medium text-white transition-colors bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-70"},[H.value?(i(),d(N,{key:0},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 mr-2 -ml-1 text-white animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t[27]||(t[27]=p(" Loading... "))],64)):(i(),d(N,{key:1},[p(" Load More ")],64))],8,Zt)])):y("",!0),L(k)?y("",!0):(i(),d("div",qt,[e("nav",Gt,[e("button",{onClick:t[8]||(t[8]=s=>Q(C.value-1)),disabled:C.value===1,class:"inline-flex items-center px-3 py-2.5 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-l-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[28]||(t[28]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]),8,Qt),(i(!0),d(N,null,z(K.value,s=>(i(),d("button",{key:s,onClick:v=>Q(s),class:B(["inline-flex items-center px-4 py-2.5 text-sm font-medium border",C.value===s?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"])},l(s),11,Jt))),128)),e("button",{onClick:t[9]||(t[9]=s=>Q(C.value+1)),disabled:C.value===K.value,class:"inline-flex items-center px-3 py-2.5 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-r-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[29]||(t[29]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]),8,Kt)])])),L(k)?y("",!0):(i(),d("div",Xt,[e("p",Yt,[t[30]||(t[30]=p(" Showing ")),e("span",es,l((C.value-1)*$+1),1),t[31]||(t[31]=p(" to ")),e("span",ts,l(Math.min(C.value*$,j.value.length)),1),t[32]||(t[32]=p(" of ")),e("span",ss,l(j.value.length),1),t[33]||(t[33]=p(" results "))])]))])]))])])])]),q(pe),I.value?(i(),d("div",os,[e("div",ns,[e("div",{class:"flex items-center justify-between p-5 border-b"},[t[35]||(t[35]=e("h3",{class:"text-lg font-semibold text-gray-900"},"CusDec Details",-1)),e("button",{onClick:ne,class:"p-1.5 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 focus:outline-none"},t[34]||(t[34]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),e("div",ls,[f.value?(i(),d("div",rs,[e("div",is,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-500 mb-1"},"CusDec Number",-1)),e("p",as,l(f.value.cusdecNumber),1)]),e("div",ds,[t[37]||(t[37]=e("p",{class:"text-sm text-gray-500 mb-1"},"Status",-1)),e("p",us,[e("span",{class:B(re(f.value.status))},l(f.value.status),3)])]),e("div",cs,[t[38]||(t[38]=e("p",{class:"text-sm text-gray-500 mb-1"},"Consignee",-1)),e("p",ms,l(f.value.consigneeName),1)]),e("div",gs,[t[39]||(t[39]=e("p",{class:"text-sm text-gray-500 mb-1"},"Declarant",-1)),e("p",ps,l(f.value.declarantName),1)]),e("div",vs,[t[40]||(t[40]=e("p",{class:"text-sm text-gray-500 mb-1"},"Invoice Value",-1)),e("p",xs,l(f.value.invoiceValue),1)]),e("div",ws,[t[41]||(t[41]=e("p",{class:"text-sm text-gray-500 mb-1"},"Origin Country",-1)),e("p",fs,l(f.value.originCountry),1)]),e("div",bs,[t[42]||(t[42]=e("p",{class:"text-sm text-gray-500 mb-1"},"Container Count",-1)),e("p",hs,l(f.value.containerCount),1)]),e("div",ys,[t[43]||(t[43]=e("p",{class:"text-sm text-gray-500 mb-1"},"Incoterm",-1)),e("p",ks,l(f.value.incoterm),1)])])):y("",!0)])])])):y("",!0),q(ge,{isOpen:V.value,"onUpdate:isOpen":t[10]||(t[10]=s=>V.value=s),itemId:S.value.id,itemType:S.value.type,status:S.value.status},null,8,["isOpen","itemId","itemType","status"])]))}});export{$s as default};
